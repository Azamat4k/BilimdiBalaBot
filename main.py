import logging
import os
from aiogram import Bot, Dispatcher, executor, types
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton
from dotenv import load_dotenv

load_dotenv()

BOT_TOKEN = os.getenv("BOT_TOKEN")
ADMINS = os.getenv("ADMINS", "").split(",")

bot = Bot(token=BOT_TOKEN)
dp = Dispatcher(bot)

# –ë–∞—Å—Ç—ã –º”ô–∑—ñ—Ä –±–∞—Ç—ã—Ä–º–∞–ª–∞—Ä—ã
menu_kz = ["üìã –ö—É—Ä—Å—Ç–∞—Ä“ì–∞ –∂–∞–∑—ã–ª—É", "üìö –ö—É—Ä—Å—Ç–∞—Ä —Ç—ñ–∑—ñ–º—ñ", "üßë‚Äçüè´ “∞—Å—Ç–∞–∑–¥–∞—Ä“ì–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω", "üß† –û–ª–∏–º–ø–∏–∞–¥–∞", "ü§≤ “ö–∞–π—ã—Ä—ã–º–¥—ã–ª—ã“õ", "üåê –û–Ω–ª–∞–π–Ω –∫—É—Ä—Å—Ç–∞—Ä", "üèòÔ∏è –§–∏–ª–∏–∞–ª–¥–∞—Ä", "üì∞ –ñ–∞“£–∞–ª—ã“õ—Ç–∞—Ä", "üí¨ –°“±—Ä–∞“õ “õ–æ—é", "üîÅ –¢—ñ–ª–¥—ñ –∞—É—ã—Å—Ç—ã—Ä—É"]
menu_ru = ["üìã –ó–∞–ø–∏—Å—å –Ω–∞ –∫—É—Ä—Å—ã", "üìö –°–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤", "üßë‚Äçüè´ –î–ª—è —É—á–∏—Ç–µ–ª–µ–π", "üß† –û–ª–∏–º–ø–∏–∞–¥–∞", "ü§≤ –ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "üåê –û–Ω–ª–∞–π–Ω –∫—É—Ä—Å—ã", "üèòÔ∏è –§–∏–ª–∏–∞–ª—ã", "üì∞ –ù–æ–≤–æ—Å—Ç–∏", "üí¨ –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å", "üîÅ –°–º–µ–Ω–∏—Ç—å —è–∑—ã–∫"]

keyboard_kz = ReplyKeyboardMarkup(resize_keyboard=True).add(*[KeyboardButton(b) for b in menu_kz])
keyboard_ru = ReplyKeyboardMarkup(resize_keyboard=True).add(*[KeyboardButton(b) for b in menu_ru])

user_lang = {}

@dp.message_handler(commands=["start"])
async def start_handler(message: types.Message):
    user_lang[message.from_user.id] = "kz"
    await message.answer("–¢—ñ–ª–¥—ñ —Ç–∞“£–¥–∞“£—ã–∑ / –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫:
üá∞üáø “ö–∞–∑–∞“õ—à–∞ “Ø—à—ñ–Ω: /kz
üá∑üá∫ –†—É—Å—Å–∫–∏–π —è–∑—ã–∫: /ru")

@dp.message_handler(commands=["kz"])
async def lang_kz(message: types.Message):
    user_lang[message.from_user.id] = "kz"
    await message.answer("“ö–æ—à –∫–µ–ª–¥—ñ“£—ñ–∑! –ú”ô–∑—ñ—Ä–¥–µ–Ω —Ç–∞“£–¥–∞“£—ã–∑:", reply_markup=keyboard_kz)

@dp.message_handler(commands=["ru"])
async def lang_ru(message: types.Message):
    user_lang[message.from_user.id] = "ru"
    await message.answer("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –í—ã–±–µ—Ä–∏—Ç–µ –∏–∑ –º–µ–Ω—é:", reply_markup=keyboard_ru)

@dp.message_handler()
async def menu_handler(message: types.Message):
    lang = user_lang.get(message.from_user.id, "kz")
    text = message.text

    responses = {
        "kz": {
            "üìã –ö—É—Ä—Å—Ç–∞—Ä“ì–∞ –∂–∞–∑—ã–ª—É": "–ö—É—Ä—Å—Ç–∞—Ä“ì–∞ –∂–∞–∑—ã–ª—É “Ø—à—ñ–Ω: https://wa.me/message/OFCXOW7IN3RMM1",
            "üìö –ö—É—Ä—Å—Ç–∞—Ä —Ç—ñ–∑—ñ–º—ñ": "–ú–µ–Ω—Ç–∞–ª–¥—ã –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞, –∂—ã–ª–¥–∞–º –æ“õ—É, –∫–∞–ª–ª–∏–≥—Ä–∞—Ñ–∏—è, –∞“ì—ã–ª—à—ã–Ω —Ç—ñ–ª—ñ, –º–µ–∫—Ç–µ–ø–∫–µ –¥–∞–π—ã–Ω–¥—ã“õ –∂”ô–Ω–µ —Ç–∞“ì—ã –±–∞—Å“õ–∞.",
            "üßë‚Äçüè´ “∞—Å—Ç–∞–∑–¥–∞—Ä“ì–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω": "“∞—Å—Ç–∞–∑–¥–∞—Ä “Ø—à—ñ–Ω —Ñ—Ä–∞–Ω—à–∏–∑–∞, ”ô–¥—ñ—Å—Ç–µ–º–µ –∂”ô–Ω–µ –≥—Ä–∞–Ω—Ç –∞–ª—É –∫—É—Ä—Å—Ç–∞—Ä—ã –±–∞—Ä.",
            "üß† –û–ª–∏–º–ø–∏–∞–¥–∞": "“∞—à“õ—ã—Ä –æ–π –æ–ª–∏–º–ø–∏–∞–¥–∞—Å—ã–Ω–∞ “õ–∞—Ç—ã—Å—É: https://bilimdibala.kz/olympiada",
            "ü§≤ “ö–∞–π—ã—Ä—ã–º–¥—ã–ª—ã“õ": "BilimdiBala “õ–∞–π—ã—Ä—ã–º–¥—ã–ª—ã“õ “õ–æ—Ä—ã —Ç—É—Ä–∞–ª—ã —Ç–æ–ª—ã“õ –∞“õ–ø–∞—Ä–∞—Ç: https://bilimdibala.kz/fund",
            "üåê –û–Ω–ª–∞–π–Ω –∫—É—Ä—Å—Ç–∞—Ä": "–û–Ω–ª–∞–π–Ω –∫—É—Ä—Å—Ç–∞—Ä“ì–∞ —Ç—ñ—Ä–∫–µ–ª—É: https://bilimdibala.kz/online",
            "üèòÔ∏è –§–∏–ª–∏–∞–ª–¥–∞—Ä": "–ë—ñ–∑–¥—ñ“£ —Ñ–∏–ª–∏–∞–ª–¥–∞—Ä: –©—É—á–∏–Ω—Å–∫, –®–æ—Ä—Ç–∞–Ω–¥—ã, –°—Ç–µ–ø–Ω—è–∫. –¢–æ–ª—ã“ì—ã—Ä–∞“õ —Å–∞–π—Ç—Ç–∞–Ω “õ–∞—Ä–∞“£—ã–∑.",
            "üì∞ –ñ–∞“£–∞–ª—ã“õ—Ç–∞—Ä": "–°–æ“£“ì—ã –∂–∞“£–∞–ª—ã“õ—Ç–∞—Ä: BilimdiBala Instagram –ø–∞—Ä–∞“õ—à–∞—Å—ã–Ω–∞–Ω –æ“õ—ã“£—ã–∑.",
            "üí¨ –°“±—Ä–∞“õ “õ–æ—é": "–°“±—Ä–∞“ì—ã“£—ã–∑–¥—ã –±—ñ–∑–≥–µ –æ—Å—ã –∂–µ—Ä–¥–µ–Ω –∂–∞–∑–∞ –∞–ª–∞—Å—ã–∑: https://wa.me/message/OFCXOW7IN3RMM1",
            "üîÅ –¢—ñ–ª–¥—ñ –∞—É—ã—Å—Ç—ã—Ä—É": "üá∑üá∫ –û—Ä—ã—Å —Ç—ñ–ª—ñ “Ø—à—ñ–Ω /ru –¥–µ–ø –∂–∞–∑—ã“£—ã–∑."
        },
        "ru": {
            "üìã –ó–∞–ø–∏—Å—å –Ω–∞ –∫—É—Ä—Å—ã": "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫—É—Ä—Å—ã: https://wa.me/message/OFCXOW7IN3RMM1",
            "üìö –°–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤": "–ú–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞, —Å–∫–æ—Ä–æ—á—Ç–µ–Ω–∏–µ, –∫–∞–ª–ª–∏–≥—Ä–∞—Ñ–∏—è, –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —à–∫–æ–ª–µ –∏ –¥—Ä.",
            "üßë‚Äçüè´ –î–ª—è —É—á–∏—Ç–µ–ª–µ–π": "–§—Ä–∞–Ω—à–∏–∑–∞, –º–µ—Ç–æ–¥–∏–∫–∏ –∏ –∫—É—Ä—Å—ã –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é —Å—É–±—Å–∏–¥–∏–π –¥–ª—è —É—á–∏—Ç–µ–ª–µ–π.",
            "üß† –û–ª–∏–º–ø–∏–∞–¥–∞": "–ü—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ –≤ –æ–ª–∏–º–ø–∏–∞–¥–µ '“∞—à“õ—ã—Ä –æ–π': https://bilimdibala.kz/olympiada",
            "ü§≤ –ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å": "–û –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ–º —Ñ–æ–Ω–¥–µ BilimdiBala: https://bilimdibala.kz/fund",
            "üåê –û–Ω–ª–∞–π–Ω –∫—É—Ä—Å—ã": "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ–Ω–ª–∞–π–Ω –∫—É—Ä—Å—ã: https://bilimdibala.kz/online",
            "üèòÔ∏è –§–∏–ª–∏–∞–ª—ã": "–ù–∞—à–∏ —Ñ–∏–ª–∏–∞–ª—ã: –©—É—á–∏–Ω—Å–∫, –®–æ—Ä—Ç–∞–Ω–¥—ã, –°—Ç–µ–ø–Ω—è–∫. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –Ω–∞ —Å–∞–π—Ç–µ.",
            "üì∞ –ù–æ–≤–æ—Å—Ç–∏": "–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ —á–∏—Ç–∞–π—Ç–µ –≤ Instagram: @bilimdibala.shchuchinsk",
            "üí¨ –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å": "–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –∑–¥–µ—Å—å: https://wa.me/message/OFCXOW7IN3RMM1",
            "üîÅ –°–º–µ–Ω–∏—Ç—å —è–∑—ã–∫": "üá∞üáø “ö–∞–∑–∞“õ —Ç—ñ–ª—ñ “Ø—à—ñ–Ω /kz –¥–µ–ø –∂–∞–∑—ã“£—ã–∑."
        }
    }

    reply = responses.get(lang, {}).get(text, "‚ùó –ë“±–ª –ø”ô—Ä–º–µ–Ω “õ–æ–ª–∂–µ—Ç—ñ–º—Å—ñ–∑. / –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ.")
    await message.answer(reply)

if __name__ == "__main__":
    logging.basicConfig(level=logging.INFO)
    executor.start_polling(dp, skip_updates=True)
